(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[819],{2905:function(e,t,s){Promise.resolve().then(s.bind(s,8903))},8903:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(7437),i=s(6648),l=s(9419),r=s(7138),n=s(5040),c=s(9428),d=s(2265),o=s(8472),u=s(3027),h=s(3561),x=s(4156);function m(){var e;let t="http://localhost:8000/api",[s,m]=(0,d.useState)(null),[f,b]=(0,d.useState)("visible"),[p,g]=(0,d.useState)(h.Z),[v,w]=(0,d.useState)("blur"),[j,y]=(0,d.useState)(""),[N,_]=(0,d.useState)(""),[S,k]=(0,d.useState)(""),[C,Z]=(0,d.useState)(""),[I,V]=(0,d.useState)(),[P,E]=(0,d.useState)(""),[z,F]=(0,d.useState)(""),[H,W]=(0,d.useState)("hidden"),[L,T]=(0,d.useState)(""),[U,B]=(0,d.useState)(!1);(0,d.useEffect)(()=>{e=localStorage.getItem("gts_token"),m(localStorage.getItem("phone")),b(e?"visible":"hidden"),w(e?"hidden":"visible")},[e]);let D=async()=>{if(S!=s&&/^[0-9]*0[0-9]*$/.test(S)&&10===S.length){let e=await o.Z.post("".concat(t,"/verify_phone"),{for:"send",phone:S});if(e.data.result){let t=e.data.result;localStorage.setItem("gtsvch",t)}A(),V("disabled:cursor-not-allowed"),setTimeout(()=>{V("")},6e4)}else(0,x.yv)("Same or Invalid Number",{variant:"info"})},A=()=>{W("visible"),"blur"==z?F(""):F("blur")};(0,d.useEffect)(()=>{e?(async()=>{try{let e=localStorage.getItem("gts_token"),s=await o.Z.post("".concat(t,"/profile"),null,{headers:{Authorization:"Bearer ".concat(e)}});y(s.data.result.First_Name),_(s.data.result.Last_Name),k(s.data.result.Phone),Z(s.data.result.NIC),E(s.data.result.Email),g(s.data.result.Status),1==s.data.result.Status?g(h.Z):g(u.Z),localStorage.setItem("phone",s.data.result.Phone)}catch(e){console.error("Error fetching profile data:",e),(0,x.yv)("Failed to fetch profile data",{variant:"error"})}})():((0,x.yv)("Please Login",{variant:"error"}),setTimeout(()=>{window.location.href="/sign-in"},2e3))},[e]);let G=async e=>{e.preventDefault();try{let e=localStorage.getItem("gtsvch"),s=await o.Z.post("".concat(t,"/verify"),{for:"check",code:L,gtscode:e});"Verified"==s.data.status?((0,x.yv)("Verification Success",{variant:"success"}),F(""),W("hidden"),B(!0),setVerify_update(h.Z),localStorage.removeItem("gtsvch")):(0,x.yv)("Verification Failed",{variant:"error"})}catch(e){console.error("Verification failed:",e)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"".concat(H," z-10 flex justify-center items-center absolute left-0 right-0 top-0 bottom-0 h-full mt-auto mb-auto"),children:(0,a.jsx)("div",{tabindex:"-1","aria-hidden":"true",className:" ",children:(0,a.jsx)("div",{class:"relative p-4 w-full max-w-md max-h-full",children:(0,a.jsxs)("div",{class:"relative bg-white bg-opacity-30 bg-blur rounded-lg shadow ",children:[(0,a.jsx)("h3",{class:"text-xl text-white dark:text-white text-center pt-5 ",children:"Verify Your Phone"}),(0,a.jsx)("div",{class:"p-4 md:p-5",children:(0,a.jsxs)("form",{class:"space-y-4",action:"#",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{for:"email",class:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Verification Code"}),(0,a.jsx)("input",{type:"text",name:"code",id:"code",value:L,onChange:e=>T(e.target.value),className:"border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5",placeholder:"Verification Code",required:!0})]}),(0,a.jsx)("button",{type:"submit",class:"w-full text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",onClick:G,children:"Verify"}),(0,a.jsxs)("div",{class:"text-sm font-medium text-white text-center",children:["Didn't Get Code? ",(0,a.jsx)("a",{href:"#",onClick:D,className:"".concat(V," text-blue-700 hover:underline dark:text-blue-700"),children:"Resend"})]})]})})]})})})}),(0,a.jsxs)("div",{className:"".concat(z),children:[(0,a.jsx)("div",{className:"fixed left-0 right-0 top-0 bottom-0 -z-50 ",children:(0,a.jsx)(i.default,{src:c.Z,className:" object-cover w-full h-full opacity-15"})}),(0,a.jsxs)("div",{className:"min-h-[100vh] flex flex-col",children:[(0,a.jsx)("nav",{className:"p-4  md:p-10 text-white",children:(0,a.jsxs)("div",{className:"max-w-screen-xl flex flex-wrap items-center justify-between mx-auto h-full",children:[(0,a.jsx)("div",{}),(0,a.jsx)(i.default,{src:l.Z,alt:"gts logo",className:"special_logo absolute h-40 w-52 left-3 top-[-14px] sm:left-1"}),(0,a.jsx)("div",{className:"flex items-center md:order-2 space-x-3 md:space-x-0 rtl:space-x-reverse",children:(0,a.jsx)("div",{className:"z-50 hidden my-4 text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-700 dark:divide-gray-600",id:"user-dropdown"})}),(0,a.jsx)("div",{className:"items-center justify-between hidden w-full md:flex md:w-auto md:order-1",id:"navbar-user",children:(0,a.jsx)("ul",{className:"flex flex-col font-medium p-4 md:p-0 border rounded-lg md:space-x-8 rtl:space-x-reverse md:flex-row md:mt-0 md:border-0 text-white",children:(0,a.jsxs)("h1",{className:"text-white text-center text-[20px] mt-5 mb-5 font-bold",children:[(0,a.jsx)("span",{className:"font-bold span_g",children:"G"})," ",(0,a.jsx)("span",{className:"font-bold span_t",children:"T"})," ",(0,a.jsx)("span",{className:"font-bold span_s",children:"S"})," User Profile"]})})}),(0,a.jsx)("div",{className:"absolute right-10 text-white top-8 text-center special-signup_in_button ".concat(v),children:(0,a.jsxs)("div",{className:" bg-white bg-opacity-30 flex justify-center  rounded-[20px]",children:[(0,a.jsx)(r.default,{href:"/sign-in",children:(0,a.jsx)("div",{className:"pr-2 pl-3 p-2 ",children:"Signin"})}),(0,a.jsx)(r.default,{href:"/sign-up",children:(0,a.jsx)("div",{className:"pl-3 pr-3 p-2 bg-blue-600 rounded-[20px] ",children:"Signup"})})]})}),(0,a.jsx)("div",{className:"absolute right-10 text-white top-8 text-center special-signup_in_button ".concat(f),children:(0,a.jsx)(r.default,{href:"/profile",children:(0,a.jsx)(i.default,{src:n.Z,className:" bg-white h-[40px] w-[40px] rounded-full p-1.5"})})})]})}),(0,a.jsx)("div",{className:"flex items-center justify-center",children:(0,a.jsxs)("div",{className:" text-black bg-white bg-opacity-30 min-w-[400px] max-w-[600px] rounded-[35px] ml-[10%] mr-[10%] specical_profile",children:[(0,a.jsxs)("div",{className:"ml-[5%] mr-[5%]",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mt-8 mb-8",children:[(0,a.jsx)("h2",{className:"text-white w-1/4 text-left",children:"First Name"}),(0,a.jsx)("input",{type:"text",className:"bg-white bg-opacity-10 text-white ml-2 border-b border-gray-400 outline-none rounded-[20px] p-1 w-3/4",onChange:e=>y(e.target.value),value:j})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-8 mb-8",children:[(0,a.jsx)("h2",{className:"text-white w-1/4 text-left",children:"Last Name"}),(0,a.jsx)("input",{type:"text",className:"bg-white bg-opacity-10 text-white ml-2 border-b border-gray-400 outline-none rounded-[20px] p-1 w-3/4",onChange:e=>_(e.target.value),value:N})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-8 mb-8",children:[(0,a.jsx)("h2",{className:"text-white w-1/4 text-left",children:"Email"}),(0,a.jsx)("input",{type:"email",className:"bg-white bg-opacity-10 text-white ml-2 border-b border-gray-400 outline-none rounded-[20px] p-1 w-3/4",onChange:e=>E(e.target.value),value:P})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-8 mb-8",children:[(0,a.jsx)("h2",{className:"text-white w-1/4 text-left",children:"Mobile Number"}),(0,a.jsxs)("div",{className:"flex justify-end w-full ",children:[(0,a.jsx)(i.default,{src:p,unoptimized:!0,width:50,height:50,className:"h-[55px] w-[50px]  absolute -mt-[12px]",onClick:D}),(0,a.jsx)("input",{type:"tel",className:"bg-white bg-opacity-10 text-white ml-2 border-b border-gray-400 outline-none rounded-[20px] p-1 w-11/12",onChange:e=>{let t=e.target.value;k(t),t!=s?g(u.Z):g(h.Z)},value:S})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-8 mb-8",children:[(0,a.jsx)("h2",{className:"text-white w-1/4 text-left",children:"NIC Number"}),(0,a.jsx)("input",{type:"text",className:"bg-white bg-opacity-10 text-white ml-2 border-b border-gray-400 outline-none rounded-[20px] p-1 w-3/4",onChange:e=>Z(e.target.value),value:C})]})]}),(0,a.jsxs)("div",{className:" flex justify-center ",children:[(0,a.jsx)(r.default,{href:"/profile",className:" font-bold text-white bg-blue-700 p-2 pl-5 pr-5 rounded-[20px] ml-auto mt-5 mb-5  mr-auto",children:"Back"}),(0,a.jsx)("h1",{className:" cursor-pointer font-bold text-white bg-blue-700 p-2 pl-5 pr-5 rounded-[20px] ml-auto mt-5 mb-5  mr-auto",onClick:()=>{let e=localStorage.getItem("gts_token");console.log(s,S),!0==U||s==S?(async()=>{try{let s=await o.Z.post("".concat(t,"/update_profile"),{First_Name:j,Last_Name:N,email:P,Phone:S,NIC_Number:C},{headers:{Authorization:"Bearer ".concat(e)}});(0,x.yv)(s.data.message,{variant:"success"}),setTimeout(()=>{window.location.href="/profile"},2e3)}catch(e){(0,x.yv)("User Data Update Failed",{variant:"error"})}})():(0,x.yv)("Please Verify Your Phone",{variant:"error"})},children:"Update"})]})]})})]})]})]})}},9428:function(e,t){"use strict";t.Z={src:"/_next/static/media/background.895b43c3.svg",height:434,width:760,blurWidth:0,blurHeight:0}},3561:function(e,t){"use strict";t.Z={src:"/_next/static/media/green_verify.7c1dd5fe.svg",height:54,width:88,blurWidth:0,blurHeight:0}},9419:function(e,t){"use strict";t.Z={src:"/_next/static/media/logo.659d43d1.svg",height:233,width:262,blurWidth:0,blurHeight:0}},3027:function(e,t){"use strict";t.Z={src:"/_next/static/media/red_verify.1575b69f.svg",height:54,width:88,blurWidth:0,blurHeight:0}},5040:function(e,t){"use strict";t.Z={src:"/_next/static/media/user.185ad265.svg",height:31,width:31,blurWidth:0,blurHeight:0}}},function(e){e.O(0,[974,156,472,971,23,744],function(){return e(e.s=2905)}),_N_E=e.O()}]);